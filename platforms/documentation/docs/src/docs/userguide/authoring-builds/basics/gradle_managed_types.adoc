// Copyright (C) 2024 Gradle, Inc.
//
// Licensed under the Creative Commons Attribution-Noncommercial-ShareAlike 4.0 International License.;
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      https://creativecommons.org/licenses/by-nc-sa/4.0/
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

[[gradle_types_intro]]
= Gradle Managed Types

Gradle Managed Types are the building blocks for writing modern, efficient, and cache-friendly build logic.

They replace eager properties (like `val file = File(...)`) with lazy, trackable inputs and outputs, enabling incremental builds, build caching, and configuration cache support.

== Common Managed Types

[cols="1,3", options="header"]
|===
| Type                  | Purpose

| `Property<T>`         | Lazy scalar value
| `ListProperty<T>`     | Lazy list of values
| `MapProperty<K, V>`   | Lazy map of values
| `RegularFileProperty` | Lazy file input/output
| `DirectoryProperty`   | Lazy directory input/output
| `Provider<T>`         | Read-only, deferred value (e.g. from another task)
|===

== Eager vs Lazy

Gradle distinguishes between *eager* and *lazy* evaluation to control **when** values are computed and **how** they participate in task wiring, up-to-date checks, and caching.

Writing lazy, declarative build logic is key to unlocking Gradle’s performance features.

=== Eager Evaluation

* Happens **immediately** during the configuration phase.
* Values are resolved *as soon as the line is executed*.
* Prevents Gradle from optimizing build logic.

[source,kotlin]
----
val version = project.version.toString()       // evaluated now
val file = File("build/output.txt")            // evaluated now
myTask.outputFile.set(file)
----

Here, `project.version` and `File(...)` are evaluated immediately, even if the task isn’t run. This makes builds less cacheable and more brittle.

=== Lazy Evaluation

* Defers computation until it’s actually needed (usually at task execution time).
* Allows Gradle to build the task graph, apply caching, and run tasks in parallel.
* Enables **configuration cache**, **incremental builds**, and **task avoidance**.

[source,kotlin]
----
val outputFile: RegularFileProperty = project.objects.fileProperty()    // evaluated later
outputFile.set(layout.buildDirectory.file("output.txt"))                // evaluated later
----

Here, `layout.buildDirectory.file(...)` returns a `Provider<RegularFile>`, nothing is resolved until Gradle needs it during task execution.

Consult the <<properties_providers.adoc#properties_and_providers,Gradle Types>> chapter to learn more.

[.text-right]
**Next Step:** <<dependencies.adoc#dependencies_intro,Learn about Declaring and Managing Dependencies>> >>
