// Copyright 2025 Gradle and contributors.
//
// Licensed under the Creative Commons Attribution-Noncommercial-ShareAlike 4.0 International License.
// You may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      https://creativecommons.org/licenses/by-nc-sa/4.0/
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

[[how_to_upgrade_transitive_dependencies]]
= How to Upgrade Dependencies in Gradle

This guide explains how to manage and upgrade versions of **transitive dependencies** in Gradle using **dependency constraints**.

== Why Upgrade a Dependency?

There are many reasons to upgrade a version of a dependency:

* *Bug fixes* resolve issues present in older versions.
* *Security patches* address vulnerabilities to keep the project safe.
* *Performance improvements* make builds faster and more efficient.
* *New features* provide additional functionality and better compatibility.

== Adding Constraints on Transitive Dependencies

Dependency constraints allow you to define the **version** or **version range** of both direct dependencies and transitive dependencies.

Dependency constraints can also **override transitive dependencies** and enforce strict versions, even <<how_to_downgrade_dependencies.adoc#how_to_downgrade_dependencies,**downgrading**>> if necessary.

=== Setting Dependency Constraints

To enforce specific versions of transitive dependencies, use the `constraints` block inside `dependencies {}`:

[source,groovy]
.build.gradle
----
dependencies {
    implementation 'org.apache.httpcomponents:httpclient' // No version specified
    constraints {
        implementation('org.apache.httpcomponents:httpclient:4.5.3') {
            because 'previous versions have a bug impacting this application'
        }
        implementation('commons-codec:commons-codec:1.11') {
            because 'version 1.9 pulled from httpclient has bugs affecting this application'
        }
    }
}
----

- The `implementation` dependency **omits the version**.
- The `constraints` block **enforces specific versions** for `httpclient` and `commons-codec`.
- The constraint for `commons-codec` **only applies if it is pulled transitively**.

== Summary

Use dependency constraints when:

- ✅ You want to **override transitive dependencies** with a specific version.
- ✅ You need to enforce **a strict version or range** across multiple dependencies.
- ✅ You want to **prevent dependency conflicts** without manually adding transitive dependencies.
